# nixpacks.toml
# Configuración para instalar librerías gráficas requeridas por WeasyPrint en Railway

[phases.setup]
nixPkgs = [
    "python312",      # Aseguramos coincidencia con runtime definido
    "gcc",            
    "zlib",
    "libxml2",
    "libxslt",
    "libffi",
    "cairo",          # CRÍTICO: Gráficos Vectoriales
    "pango",          # CRÍTICO: Renderizado de Texto
    "gdk-pixbuf",     # CRÍTICO: Manejo de Imágenes
    "gobject-introspection" # Puente entre C y Python
]

[phases.install]
cmds = ["python -m pip install -r requirements.txt"]

[phases.build]
cmds = ["python manage.py collectstatic --noinput"]

[start]
cmd = "gunicorn config.wsgi:application"
